<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Interactive simulator demonstrating Raiku's deterministic execution, AOT/JIT reservations, and Ackermann retries on Solana" />
    <meta name="keywords" content="Raiku, Solana, deterministic execution, blockchain, simulator, AOT, JIT, visualization" />
    <meta name="author" content="Raiku Ideathon Submission" />
    <title>Raiku Deterministic Slot Orchestrator — Interactive Simulator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header role="banner">
      <h1>Raiku Deterministic Slot Orchestrator</h1>
      <p class="subtitle">AOT/JIT reservations • App-defined ordering • Ackermann retries</p>
    </header>

    <section class="controls" aria-label="Simulation controls">
      <div class="control-group">
        <label for="mode">Mode</label>
        <select id="mode" aria-label="Scheduling mode">
          <option value="aot">AOT (Reserve ahead)</option>
          <option value="jit">JIT (Just-in-time)</option>
        </select>
      </div>
      <div class="control-group">
        <label for="cu">Tx Compute Units</label>
        <input id="cu" type="number" min="100" step="100" value="2000" aria-label="Transaction compute units" />
      </div>
      <div class="control-group">
        <label for="slotCapacity">Slot Capacity (CUs)</label>
        <input id="slotCapacity" type="number" min="1000" step="1000" value="48000" aria-label="Slot capacity in compute units" />
      </div>
      <div class="control-group">
        <label for="deadline">Deadline (slots from now)</label>
        <input id="deadline" type="number" min="1" value="10" aria-label="Transaction deadline" />
      </div>
      <div class="control-group">
        <label for="priority">Priority</label>
        <select id="priority" aria-label="Transaction priority">
          <option value="low">Low</option>
          <option value="medium" selected>Medium</option>
          <option value="high">High</option>
        </select>
      </div>
      <div class="control-group">
        <label for="group">Group (ordering)</label>
        <input id="group" type="text" value="DEX" aria-label="Transaction group" />
      </div>
      <div class="control-group">
        <label for="reserveSlot">Reserve at slot (AOT only)</label>
        <input id="reserveSlot" type="number" min="0" value="5" aria-label="AOT reservation slot offset" />
      </div>
      <div class="control-group">
        <button id="addTx" aria-label="Add single transaction">Add Tx</button>
        <button id="burst" aria-label="Add burst of 10 transactions">Add Burst (10)</button>
        <button id="advance" aria-label="Advance one slot">Advance 1 Slot</button>
        <button id="reset" aria-label="Reset simulation">Reset</button>
      </div>
      <div class="control-group toggles">
        <label><input type="checkbox" id="mevSafe" checked aria-label="MEV-safe group ordering" /> MEV-safe group ordering</label>
        <label><input type="checkbox" id="extLoad" aria-label="External congestion toggle" /> External congestion</label>
        <label>Load % <input id="extLoadPct" type="number" min="0" max="100" value="50" style="width:70px" aria-label="External load percentage" /> </label>
      </div>
      <div class="control-group">
        <button id="play" aria-label="Start auto-advance">Play</button>
        <button id="pause" aria-label="Pause auto-advance">Pause</button>
        <label>Speed ms <input id="tickMs" type="number" min="50" step="50" value="500" style="width:90px" aria-label="Tick speed in milliseconds" /></label>
      </div>
      <div class="control-group">
        <button id="scenarioDexOracle" aria-label="Load DEX vs ORACLE scenario">Scenario: DEX vs ORACLE</button>
        <button id="scenarioHftBurst" aria-label="Load HFT Burst scenario">Scenario: HFT Burst</button>
        <button id="exportCsv" aria-label="Export data as CSV">Export CSV</button>
      </div>
    </section>

    <main role="main">
      <section class="metrics" aria-label="Performance metrics">
        <div>Current slot: <span id="currentSlot">0</span></div>
        <div>Backlog: <span id="backlog">0</span></div>
        <div>Fill rate: <span id="fillRate">0%</span></div>
        <div>Avg pre-conf latency: <span id="latency">—</span></div>
        <div>Retries: <span id="retries">0</span></div>
      </section>

      <section aria-label="Timeline visualization">
        <h2>Timeline (next 60 slots)</h2>
        <div id="timeline" class="timeline" role="region" aria-label="Slot timeline with capacity visualization"></div>
      </section>

      <section aria-label="Transaction list">
        <h2>Transactions</h2>
        <div id="txList" class="tx-list" role="region" aria-label="List of all transactions"></div>
      </section>
    </main>

    <footer role="contentinfo">
      <a href="https://docs.raiku.com/" target="_blank" rel="noreferrer noopener">Raiku Docs</a>
      <span>•</span>
      <a href="README.md" target="_blank" rel="noreferrer">Concept README</a>
      <span>•</span>
      <span style="opacity: 0.7;">Built for Raiku Inevitable Ideathon</span>
    </footer>

    <script src="main.js"></script>
  </body>
</html>
